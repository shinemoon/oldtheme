<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>月下闲话 | Perl中的嵌套Hash </title>

<link rel="stylesheet" href="/css/votex.css" type="text/css" media="all">
<link rel="stylesheet" href="/css/post.css" type="text/css" media="all">
<script type="text/javascript" src="/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="/jquery-cookies.js"></script>

</head>
<body>

<h1 style="margin-bottom:20px;"> Perl中的嵌套Hash <span onclick="window.location='http://fanfou.com/shinemoon'" style="cursor:pointer;margin-left:20px;font-weight:normal;font-size:16px;color:#ddd;">> <span style="font-size: 18px;font-style: italic;margin-right: 2px;color: #aaa;">S</span>hinemoon </span>

</h1>

<div style='height:80px;'>

<span class='tags cat' onclick="window.location='/categories/未分类/'">未分类</span>
 

 
</div>

<p>等到了用的时候才忽然发现，关于嵌套Hash的使用，到处都语焉不详，废了老大功夫还是在“Programming Perl”里看到了详细的解答。记下来，备忘：</p>  <h2>关于初始格式</h2>  <p>代码如下，有几个小点要注意，简单的讲就是关于括号的那点事儿：</p>  <blockquote>   <pre>%HoH = ([1. 记住Perl中的Hash表要用这个，而不是中括号，或者花括号.]<br />    flintstones =&gt; {[2. 但是如果属于嵌套内容，那么就不能再用小括号了，必须是花括号.]<br />        husband   =&gt; &quot;fred&quot;,<br />        pal       =&gt; &quot;barney&quot;,<br />    },<br />    jetsons =&gt; {<br />        husband   =&gt; &quot;george&quot;,<br />        wife      =&gt; &quot;jane&quot;,<br />        &quot;his boy&quot; =&gt; &quot;elroy&quot;,  # Key quotes needed.<br />    },<br />    simpsons =&gt; [[3. 如果需要继续嵌套数组，记得使用中括号来表示数组]{<br />        husband   =&gt; &quot;homer&quot;,<br />        wife      =&gt; &quot;marge&quot;,<br />        kid       =&gt; &quot;bart&quot;,<br />    },</pre><br /><br />  <pre>    { </pre><br /><br />  <pre>        husband =&gt; &quot;homer&quot;, </pre><br /><br />  <pre>        wife =&gt; &quot;marge&quot;, </pre><br /><br />  <pre>        kid =&gt; &quot;bart&quot;, </pre><br /><br />  <pre>    }</pre><br /><br />  <pre>    ]<br />);</pre><br /></blockquote><br /><br /><pre>&#160;</pre><br /><br /><h2>关于访问</h2><br /><br /><p>想添加新的嵌套的Hash，只需要非常直接的赋值，同样要注意几个括号，还有就是$：</p><br /><br /><blockquote><br />  <pre>$HoH{ mash } = {<br />    captain  =&gt; &quot;pierce&quot;,<br />    major    =&gt; &quot;burns&quot;,<br />    corporal =&gt; &quot;radar&quot;,<br />};</pre><br /></blockquote><br /><br /><p>&#160;</p><br /><br /><p>至于访问，我承认比我原先想的要直接了许多：</p><br /><br /><p>可以直接赋值，把不同层次的嵌套的Key值依序写下来: </p><br /><br /><blockquote><br />  <pre>$HoH{flintstones}{wife} = &quot;wilma&quot;;</pre><br /></blockquote><br /><br /><p>接下来怎么处理都是随便的事情了。 </p><br /><br /><blockquote><br />  <pre>$HoH{jetsons}{&#039;his boy&#039;} =~ s/(w)/u$1/;</pre><br /></blockquote><br /><br /><p>对于数组嵌套的话，同样，把中括号带着的序号放在该放的地方就可以了。</p><br /><br /><blockquote><br />  <p>$HoH{simpsons}[0]{wife} = &quot;wilma&quot;;</p><br /></blockquote><br /><br /><h2>关于遍历</h2><br /><br /><p>Hash表的遍历操作当然重要，嵌套起来之后无非就是多遍历一层而已，具体的内容，阅读代码也能知道大概了：</p><br /><br /><blockquote><br />  <pre>for $family ( sort keys %HoH ) {<br />    print &quot;$family: &quot;;<br />    for $role ( sort keys %{ $HoH{$family} } ) {<br />         print &quot;$role=$HoH{$family}{$role} &quot;;<br />    }<br />    print &quot;
&quot;;<br />}</pre><br /></blockquote><br /><br /><p>这些内容来源都是从<a href="http://docstore.mik.ua/orelly/perl/prog3/ch09_04.htm" target="_blank">Hashes of Hashes（Programming Perl）</a>中看到的，有兴趣可以仔细阅读原文。</p>




	<div style="margin-top:40px;margin-bottom:10px;font-size:16px;font-style:italic;text-align:right;color:#555;">07 May 2009 , 写毕。</div>




<img class='top' src="/top.png" onclick="scroll(0,0);" />
<img class='home' src="/home.png" onclick="window.location='/'" />
<script>
	$('.home').click(function(){
		if($.cookie('homeaddress') == null) {
			window.location = "/";
		} else {
			window.location = $.cookie('homeaddress') ;
		}
	});
</script>


<!-- Duoshuo Comment BEGIN -->
<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"mooninsky"};
	(function() {
	var ds = document.createElement('script');
	ds.type = 'text/javascript';ds.async = true;
	ds.src = 'http://static.duoshuo.com/embed.js';
	ds.charset = 'UTF-8';
	(document.getElementsByTagName('head')[0] 
	|| document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
<!-- Duoshuo Comment END -->

</body>
</html>
